/* ---------------------------------------------------- */
/*  Generated by Enterprise Architect Version 13.5 		*/
/*  Created On : 19-abr.-2020 4:59:23 p. m. 				*/
/*  DBMS       : PostgreSQL 						*/
/* ---------------------------------------------------- */

/* Drop Tables */

DROP TABLE IF EXISTS BIOMETRIA CASCADE
;

DROP TABLE IF EXISTS CLIENTE CASCADE
;

DROP TABLE IF EXISTS FORMA_PAGO CASCADE
;

DROP TABLE IF EXISTS GIRO CASCADE
;

DROP TABLE IF EXISTS LOCUTORIO CASCADE
;

DROP TABLE IF EXISTS NEGOCIACION CASCADE
;

DROP TABLE IF EXISTS PAIS CASCADE
;

DROP TABLE IF EXISTS TIPO_CLIENTE CASCADE
;

DROP TABLE IF EXISTS TIPO_DOCUMENTO CASCADE
;

DROP TABLE IF EXISTS UBICACION CASCADE
;

/* Drop Sequences */

DROP SEQUENCE  IF EXISTS  BIOMETRIA_SEQ  CASCADE
;

/* Create Sequences */

SERIAL STAR 0
;

/* Create Tables */

CREATE TABLE BIOMETRIA
(
	ID_BIOMETRIA numeric(20) NOT NULL,
	HUELLA_DIGITAL_01 bytea NULL,
	HUELLA_DIGITAL_02 bytea NULL,
	ID_CLIENTE varchar(50) NULL
)
;

CREATE TABLE CLIENTE
(
	ID_CLIENTE varchar(50) NOT NULL,
	ID_PAIS varchar(3) NOT NULL,
	ID_TIPO_DOCUMENTO varchar(3) NOT NULL,
	NOMBRES varchar(50) NOT NULL,
	APELLIDOS varchar(50) NOT NULL,
	RAZON_SOCIAL varchar(50) NOT NULL,
	ID_TIPO_CLIENTE varchar(50) NOT NULL,
	ID_DESTINATARIO varchar(50) NULL,
	ID_GIRO varchar(50) NULL
)
;

CREATE TABLE FORMA_PAGO
(
	ID_FORMA_PAGO varchar(50) NOT NULL,
	NOMBRE varchar(50) NULL,
	ID_GIRO varchar(50) NULL
)
;

CREATE TABLE GIRO
(
	ID_GIRO varchar(50) NOT NULL,
	ID_CLIENTE varchar(50) NOT NULL,
	ID_PAIS varchar(50) NOT NULL,
	COSTO_ENVIO numeric NOT NULL,
	FECHA_GIRO varchar(50) NOT NULL
)
;

CREATE TABLE LOCUTORIO
(
	ID_LOCUTORIO varchar(50) NOT NULL,
	ID_GIRO varchar(50) NULL,
	NOMBRE_LOCUTORIO varchar(50) NULL,
	DIRECCION_LOCUTORIO varchar(50) NULL,
	EMAIL_LOCUTORIO varchar(50) NULL,
	ID_ADMINISTRADOR varchar(50) NULL,
	TELEFONO varchar(50) NULL
)
;

CREATE TABLE NEGOCIACION
(
	ID_NEGOCIACION varchar(50) NOT NULL,
	ID_ORIGEN varchar(3) NOT NULL,
	ID_BANCO varchar(50) NOT NULL,
	ID_DESTINO varchar(50) NOT NULL,
	VIGENCIA integer NOT NULL,
	FLETE numeric NOT NULL,
	COMISION_GIRO double precision NOT NULL,
	COMISION_COSTO_ENVIO double precision NOT NULL,
	COMISION_BANCO double precision NOT NULL,
	FECHA_CREACION timestamp with time zone NOT NULL,
	FECHA_FINALIZACION timestamp with time zone NOT NULL,
	TOTAL_GIRO integer NULL
)
;

CREATE TABLE PAIS
(
	ID_PAIS varchar(3) NOT NULL,
	NOMBRES varchar(50) NULL,
	GENTILICIO_NACIONAL varchar(30) NOT NULL,
	ID_ORIGEN varchar(50) NULL,
	ID_DESTINO varchar(50) NULL
)
;

CREATE TABLE TIPO_CLIENTE
(
	ID_TIPO_CLIENTE varchar(3) NOT NULL,
	NOMBRE varchar(20) NULL
)
;

CREATE TABLE TIPO_DOCUMENTO
(
	ID_TIPO_DOCUMENTO varchar(2) NOT NULL,
	NOMBRE_DOCUMENTO varchar(50) NULL
)
;

CREATE TABLE UBICACION
(
	NOMBRE varchar(50) NOT NULL,
	DIRECCION_RESIDENCIA_ACTUAL varchar(50) NOT NULL,
	ID_CLIENTE varchar(50) NOT NULL,
	NUMERO_RESIDENCIA_ACTUAL numeric NOT NULL
)
;

/* Create Primary Keys, Indexes, Uniques, Checks */

ALTER TABLE BIOMETRIA ADD CONSTRAINT PK_BIOMETRIA
	PRIMARY KEY (ID_BIOMETRIA)
;

CREATE INDEX IXFK_BIOMETRIA_CLIENTE ON BIOMETRIA (ID_CLIENTE ASC)
;

SELECT NEXT BAN('BIOMETRIA_SEQ')
;

ALTER TABLE CLIENTE ADD CONSTRAINT PK_CLIENTE
	PRIMARY KEY (ID_CLIENTE)
;

CREATE INDEX IXFK_CLIENTE_GIRO ON CLIENTE (ID_GIRO ASC)
;

CREATE INDEX IXFK_CLIENTE_PAIS ON CLIENTE (ID_PAIS ASC)
;

CREATE INDEX IXFK_CLIENTE_TIPO_CLIENTE ON CLIENTE (ID_TIPO_CLIENTE ASC)
;

CREATE INDEX IXFK_CLIENTE_TIPO_DOCUMENTO ON CLIENTE (ID_TIPO_DOCUMENTO ASC)
;

ALTER TABLE FORMA_PAGO ADD CONSTRAINT PK_Table3
	PRIMARY KEY (ID_FORMA_PAGO)
;

CREATE INDEX IXFK_FORMA_PAGO_GIRO ON FORMA_PAGO (ID_GIRO ASC)
;

ALTER TABLE GIRO ADD CONSTRAINT PK_GIRO
	PRIMARY KEY (ID_GIRO)
;

CREATE INDEX IXFK_GIRO_CLIENTE ON GIRO (ID_CLIENTE ASC)
;

CREATE INDEX IXFK_GIRO_CLIENTE_02 ON GIRO (ID_CLIENTE ASC)
;

CREATE INDEX IXFK_GIRO_NEGOCIACION ON GIRO (ID_GIRO ASC)
;

CREATE INDEX IXFK_GIRO_PAIS ON GIRO (ID_PAIS ASC)
;

ALTER TABLE LOCUTORIO ADD CONSTRAINT PK_LOCUTORIO
	PRIMARY KEY (ID_LOCUTORIO)
;

CREATE INDEX IXFK_LOCUTORIO_GIRO ON LOCUTORIO (ID_GIRO ASC)
;

ALTER TABLE NEGOCIACION ADD CONSTRAINT PK_NEGOCIACION
	PRIMARY KEY (ID_NEGOCIACION)
;

ALTER TABLE PAIS ADD CONSTRAINT PK_PAIS
	PRIMARY KEY (ID_PAIS)
;

ALTER TABLE TIPO_CLIENTE ADD CONSTRAINT PK_TIPO_CLIENTE
	PRIMARY KEY (ID_TIPO_CLIENTE)
;

ALTER TABLE TIPO_DOCUMENTO ADD CONSTRAINT PK_TIPO_DOCUMENTO
	PRIMARY KEY (ID_TIPO_DOCUMENTO)
;

ALTER TABLE UBICACION ADD CONSTRAINT PK_UBICACION
	PRIMARY KEY (ID_CLIENTE)
;

CREATE INDEX IXFK_UBICACION_CLIENTE ON UBICACION (ID_CLIENTE ASC)
;

/* Create Foreign Key Constraints */

ALTER TABLE BIOMETRIA ADD CONSTRAINT FK_BIOMETRIA_CLIENTE
	FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTE (ID_CLIENTE) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE CLIENTE ADD CONSTRAINT FK_CLIENTE_PAIS
	FOREIGN KEY (ID_PAIS) REFERENCES PAIS (ID_PAIS) ON DELETE No Action ON UPDATE No Action
;

ALTER TABLE CLIENTE ADD CONSTRAINT FK_CLIENTE_TIPO_CLIENTE
	FOREIGN KEY (ID_TIPO_CLIENTE) REFERENCES TIPO_CLIENTE (ID_TIPO_CLIENTE) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE CLIENTE ADD CONSTRAINT FK_CLIENTE_TIPO_DOCUMENTO
	FOREIGN KEY (ID_TIPO_DOCUMENTO) REFERENCES TIPO_DOCUMENTO (ID_TIPO_DOCUMENTO) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE FORMA_PAGO ADD CONSTRAINT FK_FORMA_PAGO_GIRO
	FOREIGN KEY (ID_GIRO) REFERENCES GIRO (ID_GIRO) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE GIRO ADD CONSTRAINT CLIENTE_REMITENTE
	FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTE (ID_CLIENTE) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE GIRO ADD CONSTRAINT DESTINATARIO_CLIENTE
	FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTE (ID_CLIENTE) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE LOCUTORIO ADD CONSTRAINT FK_LOCUTORIO_GIRO
	FOREIGN KEY (ID_GIRO) REFERENCES GIRO (ID_GIRO) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE NEGOCIACION ADD CONSTRAINT IXFK_NEGOCIACION_PAIS
	FOREIGN KEY (ID_ORIGEN) REFERENCES  () ON DELETE No Action ON UPDATE No Action
;

ALTER TABLE UBICACION ADD CONSTRAINT FK_UBICACION_CLIENTE
	FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTE (ID_CLIENTE) ON DELETE Restrict ON UPDATE Restrict
;

/* Create Table Comments, Sequences for Autonumber Columns */

COMMENT ON TABLE CLIENTE
	IS '*Tabla estatica "Tipo de documento" *Tabla estatica "Nacionalidad"'
;

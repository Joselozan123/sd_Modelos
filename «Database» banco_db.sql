/* ---------------------------------------------------- */
/*  Generated by Enterprise Architect Version 13.5 		*/
/*  Created On : 20-abr.-2020 10:24:06 a. m. 				*/
/*  DBMS       : PostgreSQL 						*/
/* ---------------------------------------------------- */

/* Drop Tables */

DROP TABLE IF EXISTS BANCO CASCADE
;

DROP TABLE IF EXISTS CLIENTE CASCADE
;

DROP TABLE IF EXISTS CUENTA CASCADE
;

DROP TABLE IF EXISTS TIPO_CLIENTE CASCADE
;

DROP TABLE IF EXISTS TIPO_CUENTA CASCADE
;

DROP TABLE IF EXISTS TIPO_DOCUMENTO CASCADE
;

DROP TABLE IF EXISTS TIPO_TRANSACCION CASCADE
;

DROP TABLE IF EXISTS TRANSACCION CASCADE
;

/* Create Tables */

CREATE TABLE BANCO
(
	ID_BANCO varchar(50) NOT NULL,
	ID_GIRO varchar(50) NULL,
	ID_ORIGEN varchar(3) NULL,
	ID_DESTINO varchar(3) NULL,
	NOMBRE_BANCO varchar(50) NULL,
	ID_CLIENTE varchar(50) NULL
)
;

CREATE TABLE CLIENTE
(
	ID_CLIENTE varchar(50) NOT NULL,
	CLAVE_CUENTA varchar(50) NULL,
	NOMBRE_CLIENTE varchar(50) NULL,
	APELLIDO_CLIENTE varchar(50) NULL,
	DIRECCION_CLIENTE varchar(50) NULL,
	RAZON_SOCIAL_CLIENTE varchar(50) NULL,
	ESTADO_CIVIL_CLIENTE varchar(50) NULL,
	ID_CUENTA varchar(50) NULL,
	EMAIL_CLIENTE varchar(50) NULL,
	ID_BANCO varchar(50) NULL,
	SEXO varchar(50) NULL
)
;

CREATE TABLE CUENTA
(
	ID_CLIENTE varchar(50) NULL,
	ID_CUENTA varchar(50) NOT NULL,
	NOMBRE_CUENTA varchar(50) NULL,
	ID_TIPO_CUENTA varchar(50) NULL
)
;

CREATE TABLE TIPO_CLIENTE
(
	ID_TIPO_CLIENTE varchar(50) NOT NULL,
	RAZON_SOCIAL_CLIENTE varchar(50) NULL,
	ID_CLIENTE varchar(50) NULL
)
;

CREATE TABLE TIPO_CUENTA
(
	ID_TIPO_CUENTA varchar(50) NOT NULL,
	NOMBRE varchar(50) NULL
)
;

CREATE TABLE TIPO_DOCUMENTO
(
	ID_TIPO_DOCUMENTO varchar(50) NOT NULL,
	NOMBRE varchar(50) NULL
)
;

CREATE TABLE TIPO_TRANSACCION
(
	ID_TIPO_TRANSACCION varchar(50) NOT NULL,
	DETALLES varchar(50) NULL,
	ID_TRANSACCION varchar(50) NULL
)
;

CREATE TABLE TRANSACCION
(
	ID_TRANSACCION varchar(50) NOT NULL,
	MONTO integer NULL,
	ID_DESTINATARIO varchar(50) NULL,
	ID_ORIGEN varchar(50) NULL,
	FECHA_INICIO timestamp with time zone NULL,
	ID_CUENTA varchar(50) NULL,
	ID_GIRO varchar(50) NULL,
	COMISION_BANCO double precision NULL,
	COMISION_GIRO double precision NULL,
	ID_TIPO_TRANSACCION varchar(50) NULL
)
;

/* Create Primary Keys, Indexes, Uniques, Checks */

ALTER TABLE BANCO ADD CONSTRAINT PK_BANCO
	PRIMARY KEY (ID_BANCO)
;

CREATE INDEX IXFK_BANCO_CLIENTE ON BANCO (ID_CLIENTE ASC)
;

ALTER TABLE CLIENTE ADD CONSTRAINT PK_Table1
	PRIMARY KEY (ID_CLIENTE)
;

CREATE INDEX IXFK_CLIENTE_BANCO ON CLIENTE (ID_BANCO ASC)
;

CREATE INDEX IXFK_CLIENTE_CUENTA ON CLIENTE (ID_CUENTA ASC)
;

CREATE INDEX IXFK_CLIENTE_TIPO_CLIENTE ON CLIENTE (ID_CLIENTE ASC)
;

CREATE INDEX IXFK_CLIENTE_TIPO_DOCUMENTO ON CLIENTE (ID_CLIENTE ASC)
;

ALTER TABLE CUENTA ADD CONSTRAINT PK_CUENTA
	PRIMARY KEY (ID_CUENTA)
;

CREATE INDEX IXFK_CUENTA_TIPO_CUENTA ON CUENTA (ID_TIPO_CUENTA ASC)
;

ALTER TABLE TIPO_CLIENTE ADD CONSTRAINT PK_TIPO_CLIENTE
	PRIMARY KEY (ID_TIPO_CLIENTE)
;

CREATE INDEX IXFK_TIPO_CLIENTE_CLIENTE ON TIPO_CLIENTE (ID_CLIENTE ASC)
;

ALTER TABLE TIPO_CUENTA ADD CONSTRAINT PK_TIPO_CUENTA
	PRIMARY KEY (ID_TIPO_CUENTA)
;

ALTER TABLE TIPO_DOCUMENTO ADD CONSTRAINT PK_TIPO_DOCUMENTO
	PRIMARY KEY (ID_TIPO_DOCUMENTO)
;

ALTER TABLE TIPO_TRANSACCION ADD CONSTRAINT PK_TIPO_TRANSACCION
	PRIMARY KEY (ID_TIPO_TRANSACCION)
;

ALTER TABLE TRANSACCION ADD CONSTRAINT PK_TRANSACCION
	PRIMARY KEY (ID_TRANSACCION)
;

CREATE INDEX IXFK_TRANSACCION_TIPO_TRANSACCION ON TRANSACCION (ID_TIPO_TRANSACCION ASC)
;

/* Create Foreign Key Constraints */

ALTER TABLE CLIENTE ADD CONSTRAINT FK_CLIENTE_BANCO
	FOREIGN KEY (ID_BANCO) REFERENCES BANCO (ID_BANCO) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE CLIENTE ADD CONSTRAINT FK_CLIENTE_CUENTA
	FOREIGN KEY (ID_CUENTA) REFERENCES CUENTA (ID_CUENTA) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE CLIENTE ADD CONSTRAINT FK_CLIENTE_TIPO_CLIENTE
	FOREIGN KEY (ID_CLIENTE) REFERENCES TIPO_CLIENTE (ID_TIPO_CLIENTE) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE CLIENTE ADD CONSTRAINT FK_CLIENTE_TIPO_DOCUMENTO
	FOREIGN KEY (ID_CLIENTE) REFERENCES TIPO_DOCUMENTO (ID_TIPO_DOCUMENTO) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE CUENTA ADD CONSTRAINT FK_CUENTA_TIPO_CUENTA
	FOREIGN KEY (ID_TIPO_CUENTA) REFERENCES TIPO_CUENTA (ID_TIPO_CUENTA) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE TRANSACCION ADD CONSTRAINT FK_TRANSACCION_CUENTA
	FOREIGN KEY (ID_CUENTA) REFERENCES CUENTA (ID_CUENTA) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE TRANSACCION ADD CONSTRAINT FK_TRANSACCION_TIPO_TRANSACCION
	FOREIGN KEY (ID_TIPO_TRANSACCION) REFERENCES TIPO_TRANSACCION (ID_TIPO_TRANSACCION) ON DELETE Restrict ON UPDATE Restrict
;

/* ---------------------------------------------------- */
/*  Generated by Enterprise Architect Version 13.5 		*/
/*  Created On : 20-abr.-2020 10:30:48 a. m. 				*/
/*  DBMS       : PostgreSQL 						*/
/* ---------------------------------------------------- */

/* Drop Tables */

DROP TABLE IF EXISTS BIOMETRIA CASCADE
;

DROP TABLE IF EXISTS CLIENTE CASCADE
;

DROP TABLE IF EXISTS CORRESPONSAL CASCADE
;

DROP TABLE IF EXISTS GIRO_DESTINO CASCADE
;

DROP TABLE IF EXISTS PAIS_DESTINO CASCADE
;

DROP TABLE IF EXISTS TIPO_CLIENTE CASCADE
;

DROP TABLE IF EXISTS TIPO_DOCUMENTO CASCADE
;

DROP TABLE IF EXISTS UBICACION_DESTINO CASCADE
;

/* Drop Sequences */

DROP SEQUENCE  IF EXISTS  BIO_SEQ  CASCADE
;

DROP SEQUENCE  IF EXISTS  Sequence1  CASCADE
;

/* Create Sequences */

SERIAL STAR 0
;

SERIAL STAR 0
;

/* Create Tables */

CREATE TABLE BIOMETRIA
(
	ID_BIOMETRIA varchar(50) NOT NULL,
	HUELLA_DIGITAL_1 bytea NULL,
	ID_CLIENTE varchar(50) NULL
)
;

CREATE TABLE CLIENTE
(
	ID_CLIENTE varchar(50) NOT NULL,
	ID_PAIS varchar(50) NOT NULL,
	NOMBRE varchar(50) NOT NULL,
	APELLIDO varchar(50) NOT NULL,
	RAZON_SOCIAL varchar(50) NOT NULL,
	ID_TIPO_CLIENTE varchar(50) NOT NULL,
	ID_ORIGEN varchar(50) NOT NULL,
	ID_GIRO varchar(50) NOT NULL,
	ID_TIPO_DOCUMENTO varchar(50) NOT NULL
)
;

CREATE TABLE CORRESPONSAL
(
	ID_CORRESPONSAL varchar(50) NOT NULL,
	ID_GIRO varchar(50) NOT NULL,
	NOMBRE_CORRESPONSAL varchar(50) NOT NULL,
	DIRECCION_CORRESPONSAL varchar(50) NOT NULL,
	EMAIL_LOCUTORIO varchar(50) NOT NULL,
	ID_ADMINISTRADOR varchar(50) NOT NULL,
	TELEFONO varchar(50) NULL
)
;

CREATE TABLE GIRO_DESTINO
(
	ID_GIRO varchar(50) NOT NULL,
	ID_CLIENTE varchar(50) NOT NULL,
	ID_PAIS varchar(50) NOT NULL,
	FECHA_RETIRO_GIRO varchar(50) NOT NULL,
	ID_CORRESPONSAL varchar(50) NULL
)
;

CREATE TABLE PAIS_DESTINO
(
	ID_PAIS varchar(50) NOT NULL,
	NOMBRES varchar(50) NOT NULL,
	GENTILICIO_PAIS varchar(50) NOT NULL,
	ID_ORIGEN varchar(50) NOT NULL,
	ID_DESTINO varchar(50) NOT NULL
)
;

CREATE TABLE TIPO_CLIENTE
(
	ID_TIPO_CLIENTE varchar(50) NOT NULL,
	NOMBRE varchar(50) NULL
)
;

CREATE TABLE TIPO_DOCUMENTO
(
	ID_TIPO_DOCUMENTO varchar(50) NOT NULL,
	NOMBRE varchar(50) NULL
)
;

CREATE TABLE UBICACION_DESTINO
(
	NOMBRE varchar(50) NOT NULL,
	DIRECCION_RESIDENCIA varchar(50) NOT NULL,
	ID_CLIENTE varchar(50) NOT NULL,
	NUMERO_RESIDENCIA varchar(50) NOT NULL
)
;

/* Create Primary Keys, Indexes, Uniques, Checks */

ALTER TABLE BIOMETRIA ADD CONSTRAINT PK_BIOMETRIA
	PRIMARY KEY (ID_BIOMETRIA)
;

CREATE INDEX IXFK_BIOMETRIA_CLIENTE ON BIOMETRIA (ID_CLIENTE ASC)
;

SELECT NEXT BAN('BIO_SEQ')
;

ALTER TABLE CLIENTE ADD CONSTRAINT PK_CLIENTE
	PRIMARY KEY (ID_CLIENTE)
;

CREATE INDEX IXFK_CLIENTE_PAIS_DESTINO ON CLIENTE (ID_PAIS ASC)
;

CREATE INDEX IXFK_CLIENTE_TIPO_CLIENTE ON CLIENTE (ID_TIPO_CLIENTE ASC)
;

CREATE INDEX IXFK_CLIENTE_TIPO_DOCUMENTO ON CLIENTE (ID_TIPO_DOCUMENTO ASC)
;

CREATE INDEX IXFK_CLIENTE_UBICACION_DESTINO ON CLIENTE (ID_CLIENTE ASC)
;

ALTER TABLE CORRESPONSAL ADD CONSTRAINT PK_CORRESPONSAL
	PRIMARY KEY (ID_CORRESPONSAL)
;

CREATE INDEX IXFK_CORRESPONSAL_GIRO_DESTINO ON CORRESPONSAL (ID_GIRO ASC)
;

ALTER TABLE GIRO_DESTINO ADD CONSTRAINT PK_GIRO_DESTINO
	PRIMARY KEY (ID_GIRO)
;

CREATE INDEX IXFK_GIRO_DESTINO_CLIENTE ON GIRO_DESTINO (ID_CLIENTE ASC)
;

ALTER TABLE PAIS_DESTINO ADD CONSTRAINT PK_PAIS_DESTINO
	PRIMARY KEY (ID_PAIS)
;

ALTER TABLE TIPO_CLIENTE ADD CONSTRAINT PK_TIPO_CLIENTE
	PRIMARY KEY (ID_TIPO_CLIENTE)
;

ALTER TABLE TIPO_DOCUMENTO ADD CONSTRAINT PK_TIPO_DOCUMENTO
	PRIMARY KEY (ID_TIPO_DOCUMENTO)
;

ALTER TABLE UBICACION_DESTINO ADD CONSTRAINT PK_UBICACION_DESTINO
	PRIMARY KEY (ID_CLIENTE)
;

/* Create Foreign Key Constraints */

ALTER TABLE BIOMETRIA ADD CONSTRAINT FK_BIOMETRIA_CLIENTE
	FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTE (ID_CLIENTE) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE CLIENTE ADD CONSTRAINT FK_CLIENTE_PAIS_DESTINO
	FOREIGN KEY (ID_PAIS) REFERENCES PAIS_DESTINO (ID_PAIS) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE CLIENTE ADD CONSTRAINT FK_CLIENTE_TIPO_CLIENTE
	FOREIGN KEY (ID_TIPO_CLIENTE) REFERENCES TIPO_CLIENTE (ID_TIPO_CLIENTE) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE CLIENTE ADD CONSTRAINT FK_CLIENTE_TIPO_DOCUMENTO
	FOREIGN KEY (ID_TIPO_DOCUMENTO) REFERENCES TIPO_DOCUMENTO (ID_TIPO_DOCUMENTO) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE CLIENTE ADD CONSTRAINT FK_CLIENTE_UBICACION_DESTINO
	FOREIGN KEY (ID_CLIENTE) REFERENCES UBICACION_DESTINO (ID_CLIENTE) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE CORRESPONSAL ADD CONSTRAINT FK_CORRESPONSAL_GIRO_DESTINO
	FOREIGN KEY (ID_GIRO) REFERENCES GIRO_DESTINO (ID_GIRO) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE GIRO_DESTINO ADD CONSTRAINT FK_GIRO_DESTINO_CLIENTE
	FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTE (ID_CLIENTE) ON DELETE Restrict ON UPDATE Restrict
;
